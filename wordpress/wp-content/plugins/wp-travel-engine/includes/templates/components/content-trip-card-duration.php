<?php
/**
 * Trip Card - Duration Component.
 *
 * @since 5.5.4
 */

$trip_duration_unit   = 'days';
$trip_duration        = 0;
$trip_duration_nights = 0;
$set_duration_type    = 'both';
$is_block_layout      = false;

extract( $args );

$label_mapping = array(
	'days'   => array( 'Day', 'Days' ),
	'nights' => array( 'Night', 'Nights' ),
	'hours'  => array( 'Hour', 'Hours' ),
);


$duration_label = array();
if ( ( 'days' !== $trip_duration_unit ) || ( 'days' === $trip_duration_unit && $trip_duration && in_array( $set_duration_type, array( 'both', 'days' ) ) ) ) {
	$duration_label[] = sprintf(
		_nx( '%1$d %2$s', '%1$d %3$s', (int) $trip_duration, 'trip duration', 'wp-travel-engine' ),
		(int) $trip_duration,
		$label_mapping[ $trip_duration_unit ][0],
		$label_mapping[ $trip_duration_unit ][1],
	);
}

if ( 'days' === $trip_duration_unit && $trip_duration_nights && in_array( $set_duration_type, array( 'both', 'nights' ) ) ) {
	$duration_label[] = sprintf( _nx( '%1$d Night', '%1$d Nights', (int) $trip_duration_nights, 'trip duration night', 'wp-travel-engine' ), (int) $trip_duration_nights );
}

if ( ! isset( $duration_label[0] ) ) {
	return;
}

if ( $is_block_layout ) {
	?>
	<span class="wpte-trip-meta wpte-trip-duration">
		<i><svg width="15" height="16" viewBox="0 0 15 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.4375 0.625C5.99123 0.625 4.57743 1.05387 3.3749 1.85738C2.17236 2.66089 1.2351 3.80294 0.681634 5.13913C0.128168 6.47531 -0.0166435 7.94561 0.265511 9.3641C0.547665 10.7826 1.24411 12.0855 2.26678 13.1082C3.28946 14.1309 4.59242 14.8273 6.0109 15.1095C7.42939 15.3916 8.89969 15.2468 10.2359 14.6934C11.5721 14.1399 12.7141 13.2026 13.5176 12.0001C14.3211 10.7976 14.75 9.38377 14.75 7.9375C14.75 6.97721 14.5609 6.02632 14.1934 5.13913C13.8259 4.25193 13.2872 3.44581 12.6082 2.76678C11.9292 2.08775 11.1231 1.54912 10.2359 1.18163C9.34868 0.814143 8.39779 0.625 7.4375 0.625ZM7.4375 13.7875C6.28048 13.7875 5.14944 13.4444 4.18742 12.8016C3.22539 12.1588 2.47558 11.2451 2.03281 10.1762C1.59004 9.10725 1.47419 7.93101 1.69991 6.79622C1.92563 5.66143 2.48279 4.61906 3.30093 3.80092C4.11907 2.98279 5.16144 2.42563 6.29622 2.19991C7.43101 1.97418 8.60725 2.09003 9.6762 2.5328C10.7451 2.97558 11.6588 3.72539 12.3016 4.68741C12.9444 5.64944 13.2875 6.78048 13.2875 7.9375C13.2875 9.48901 12.6712 10.977 11.5741 12.0741C10.477 13.1712 8.98902 13.7875 7.4375 13.7875ZM9.70438 8.39819L8.16875 7.51337V4.28125C8.16875 4.08731 8.09171 3.90131 7.95457 3.76418C7.81744 3.62704 7.63144 3.55 7.4375 3.55C7.24356 3.55 7.05757 3.62704 6.92043 3.76418C6.78329 3.90131 6.70625 4.08731 6.70625 4.28125V7.9375C6.70625 7.9375 6.70625 7.996 6.70625 8.02525C6.71058 8.07563 6.72293 8.125 6.74282 8.1715C6.75787 8.21488 6.77748 8.25655 6.80131 8.29581C6.82132 8.33737 6.84585 8.37661 6.87444 8.41281L6.99144 8.50787L7.05725 8.57369L8.9585 9.67056C9.06995 9.73373 9.19603 9.76651 9.32413 9.76562C9.48604 9.76676 9.64375 9.71412 9.77252 9.61596C9.90129 9.51781 9.99385 9.3797 10.0357 9.22328C10.0775 9.06686 10.0662 8.90098 10.0036 8.75166C9.94101 8.60233 9.83062 8.47801 9.68975 8.39819H9.70438Z" /></svg></i>
		<span>
		<?php echo esc_html( implode( ' - ', $duration_label ) ); ?>
		</span>
	</span>
	<?php
} else {
?>
<span class="category-trip-dur">
	<i><svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.4375 1.625C6.99123 1.625 5.57743 2.05387 4.3749 2.85738C3.17236 3.66089 2.2351 4.80294 1.68163 6.13913C1.12817 7.47531 0.983357 8.94561 1.26551 10.3641C1.54767 11.7826 2.24411 13.0855 3.26678 14.1082C4.28946 15.1309 5.59242 15.8273 7.0109 16.1095C8.42939 16.3916 9.89969 16.2468 11.2359 15.6934C12.5721 15.1399 13.7141 14.2026 14.5176 13.0001C15.3211 11.7976 15.75 10.3838 15.75 8.9375C15.75 7.97721 15.5609 7.02632 15.1934 6.13913C14.8259 5.25193 14.2872 4.44581 13.6082 3.76678C12.9292 3.08775 12.1231 2.54912 11.2359 2.18163C10.3487 1.81414 9.39779 1.625 8.4375 1.625ZM8.4375 14.7875C7.28048 14.7875 6.14944 14.4444 5.18742 13.8016C4.22539 13.1588 3.47558 12.2451 3.03281 11.1762C2.59004 10.1072 2.47419 8.93101 2.69991 7.79622C2.92563 6.66143 3.48279 5.61906 4.30093 4.80092C5.11907 3.98279 6.16144 3.42563 7.29622 3.19991C8.43101 2.97418 9.60725 3.09003 10.6762 3.5328C11.7451 3.97558 12.6588 4.72539 13.3016 5.68741C13.9444 6.64944 14.2875 7.78048 14.2875 8.9375C14.2875 10.489 13.6712 11.977 12.5741 13.0741C11.477 14.1712 9.98902 14.7875 8.4375 14.7875ZM10.7044 9.39819L9.16875 8.51337V5.28125C9.16875 5.08731 9.09171 4.90131 8.95457 4.76418C8.81744 4.62704 8.63144 4.55 8.4375 4.55C8.24356 4.55 8.05757 4.62704 7.92043 4.76418C7.78329 4.90131 7.70625 5.08731 7.70625 5.28125V8.9375C7.70625 8.9375 7.70625 8.996 7.70625 9.02525C7.71058 9.07563 7.72293 9.125 7.74282 9.1715C7.75787 9.21488 7.77748 9.25655 7.80131 9.29581C7.82132 9.33737 7.84585 9.37661 7.87444 9.41281L7.99144 9.50787L8.05725 9.57369L9.9585 10.6706C10.0699 10.7337 10.196 10.7665 10.3241 10.7656C10.486 10.7668 10.6437 10.7141 10.7725 10.616C10.9013 10.5178 10.9938 10.3797 11.0357 10.2233C11.0775 10.0669 11.0662 9.90098 11.0036 9.75166C10.941 9.60233 10.8306 9.47801 10.6898 9.39819H10.7044Z" fill="currentColor" fill-opacity="0.3"/></svg></i>
	<span>
	<?php echo esc_html( implode( ' - ', $duration_label ) ); ?>
	</span>
</span>
<?php
}
