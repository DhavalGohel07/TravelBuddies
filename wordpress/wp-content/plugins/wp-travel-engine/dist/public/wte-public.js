!function(){var e,t,a,n,i={5649:function(){window.wteL10n=window.wteL10n||{},window.wteL10n.api=window.wteapi=window.WTEApi=class{constructor(){}static async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={packages:this.getPackages,categories:this.getPackageCategories,trip:this.getTrip};return wteL10n.locale&&(t.lang=wteL10n.locale),this[e]||(this[e]="trip"==e?await n[e](t,a):lodash.keyBy(await n[e](t,a),"id")),this[e]}static async getTrip(e,t){const a=await fetch(`${wteL10n.wpapi.root+wteL10n.wpapi.versionString}trip/${e.id}?context=${e.context||"view"}`,t);return await a.json()}static async getPackageCategories(e){const t=await fetch(`${wteL10n.wpapi.root+wteL10n.wpapi.versionString}package-categories?per_page=100`);return await t.json()}static async getPackages(e,t){var a;const n=Object.entries(e).map((e=>{let[t,a]=e;return`${t}=${a}`})).join("&"),i=await fetch(`${wteL10n.wpapi.root+wteL10n.wpapi.versionString}packages/${null!==(a=e.id)&&void 0!==a?a:`?${n}`}`,t);return await i.json()}static async addNewPackage(e){const t=await fetch(`${wteL10n.wpapi.root+wteL10n.wpapi.versionString}packages`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":wteL10n.wpapi.nonce},body:JSON.stringify({title:"Untitled Package",status:"publish",post_type:"trip-packages",...e})});return await t.json()}static async removePackage(e){const t=await fetch(`${wteL10n.wpapi.root+wteL10n.wpapi.versionString}packages/${e.id}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-WP-Nonce":wteL10n.wpapi.nonce}});return await t.json()}}},6137:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.r(t),a.d(t,{default:function(){return d}});const i=lodash,{api:o,util:r,priceFormat:s,dateFormat:l}=window.wteL10n;class c{static createStore(){var e=this;if(this._store)return this._store;this._store=Redux.createStore((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_TRIP":return{...t,trip:a.data};case"UPDATE_STORE":return{...t,...a.data};case"SET_DATE":return{...t,selectedDate:a.date};case"SET_TIME":return{...t,selectedTime:a.data};case"SET_PACKAGE":return{...t,selectedPackage:a.data};case"SET_TRAVELER_RECORD":return{...t,travelerRecord:a.data};default:return t}}),Redux.applyMiddleware((e=>t=>a=>"function"==typeof a?a(e.dispatch,e.getState):t(a))))}static fetchAndDispatchData(){this._store.dispatch((async(e,t)=>{var a;let n=await o.get("trip",{id:wte.trip.id}),i=null!==(a=n.packages_ids)&&void 0!==a?a:[],r=[];try{if(!i)throw new Error(`No packages assigned to this trip - ${n.id}`);r=await o.get("packages",{include:i.join(","),per_page:100})}catch(e){console.warn("WTEBOOKING: "+e.message)}let s=await o.get("categories");e({type:"UPDATE_STORE",data:{loading:!1,trip:n,tripPackagesIds:i,tripPackages:r,pricingCategories:s,primaryCategory:Object.values(s).find((e=>e["is-primary"]))}})}))}constructor(e){var t;this.bookingform=e,this.summaryTemplate=wp.template("wte-booking-summary"),this.datetimeTemplate=wp.template("wte-booking-datetime"),this.extraServicesAPI=(t=this,()=>{let e=t._store,{trip:a}=e.getState();if(a.trip_extras.length<1)return;document.getElementById("wte-booking-extraservices-content").innerHTML=wp.template("wte-booking-extraservices")(),e.subscribe((()=>{let t=e.getState().services||{},a="";for(let n in t){let i=t[n],o=null==i?void 0:i.meta.wte_services.service_type;a+=wp.template(`wte-booking-es-${o}`)({service:i,extraServices:e.getState().extraServices})}document.getElementById("wte-booking-extraservices__services").innerHTML=a,document.getElementById("wte-booking-es-summary-content").innerHTML=wp.template("wte-booking-es-summary")(e.getState())})),e.dispatch(((t,n)=>{var i;fetch(`${wteL10n.wpapi.root}${wteL10n.wpapi.versionString}wte-services?include=${null===(i=a.trip_extras)||void 0===i?void 0:i.join(",")}`).then((t=>{t.json().then((t=>{t&&e.dispatch({type:"UPDATE_STORE",data:{services:lodash.keyBy(t,"id")}})}))}))}));const n=function(t){var a,n;let i=this,o=i.closest(".wte-booking-es-counter").dataset.info;o=o&&JSON.parse(o);let{serviceID:r,option:s}=o,l={[s]:1},c=0;if(i.classList.contains("wte-up"))c=1;else{if(!i.classList.contains("wte-down"))return;c=-1}let{extraServices:d,services:u,cartTotal:p,cart:m}=e.getState(),f=c>0?1:0;if(d[r]&&(f=c>0?d[r][s]?+d[r][s].count+1:1:d[r][s]?+d[r][s].count-1:0),f<0)return;let g=u[r]||{},v=null!==(a=null==g||null===(n=g.meta)||void 0===n?void 0:n.wte_services)&&void 0!==a?a:{},h=0,w="",y="unit";null!=v&&v.service_type&&("custom"===v.service_type?(w=v.options[s],h=+v.prices[s],y=v.service_unit):(w=g.title.rendered,h=+v.service_cost,y=v.service_unit)),l={...d[r],[s]:{count:f<0?0:f,unitPrice:h,label:w,per:y}};let b={...d,[r]:l},_=0,k=[];for(let e in b){let t=b[e];for(let e in t){let a=t[e];_+=+a.count*+a.unitPrice,+a.count>0&&(k=[...k,{extra_service:a.label,qty:a.count,price:+a.unitPrice}])}}m={...m,extraServices:k},e.dispatch({type:"UPDATE_STORE",data:{extraServices:b,cartTotal:{...p,services:_},cart:m}})};r.on("change",".wte-booking-es-select",(function(t){let a=this,n=a.dataset.info;n=n&&JSON.parse(n);let{extraServices:i,services:o}=e.getState(),{serviceID:r,option:s}=n,{options:l,service_unit:c,prices:d}=o[r].meta.wte_services,u={};u={...i,[r]:{[a.value]:{count:0,label:l[a.value],per:c,unitPrice:d[a.value]}}},e.dispatch({type:"UPDATE_STORE",data:{extraServices:u}})})),r.on("click",".wte-booking-es-counter .wte-up",n),r.on("click",".wte-booking-es-counter .wte-down",n)}),this._store=this.constructor.createStore(),this.unsubscriber=this._store.subscribe((()=>{!this._store.getState().loading&&this._store.getState().trip&&(console.info("Initialize Booking Process",this._store.getState()),this.init())})),this._store.subscribe((()=>{this.updateSelectedTime(),this.updateSummary(),this.updatePackageTabContent()})),this.priceFormat=function(e){return s(e)},this.cart={},this.currentTab=0,this.tabController={},this.timeformat="h:mm A",this.timeformatter=e=>(wteL10n.format.datetime.timezone,moment(e).format(this.timeformat)),this.addToCart=async e=>{var t,a;const{wpxhr:{root:n},tripID:i,_nonces:{addtocart:o}}=wteL10n;let{cart:r,selectedPackage:s,selectedDate:l,selectedTime:c,travelerRecord:d,cartTotal:u,packageCategories:p,groupPricings:m,trip:f}=this._store.getState();var g,v,h,w,y,b;if(""!=f.min_pax&&+f.min_pax>r.traveler)return alert(null===(g=wteL10n)||void 0===g||null===(v=g.l10n)||void 0===v||null===(h=v.invalidCartTraveler)||void 0===h?void 0:h.replace("%s",f.min_pax)),void e(!1);if(null===(t=r)||void 0===t||!t.traveler||r.traveler<1)return alert(null===(w=wteL10n)||void 0===w||null===(y=w.l10n)||void 0===y||null===(b=y.invalidCartTraveler)||void 0===b?void 0:b.replace("%s",1)),void e(!1);wteL10n.format.datetime.GMTOffset;let _=s,k=l.format("YYYY-MM-DD"),C=c.get()?c.format("YYYY-MM-DDTHH:mm"):"",S=d,T={};u=Object.values(u).reduce((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return+e+ +t}));for(let e in S){let t=S[e];if(t<1)continue;let a=p[e],n={pax:t,salePrice:null!=a&&a.salePrice?+a.salePrice:0,groupDiscountPrice:0,cost:+a.price};if(a.enabledSale&&(n.cost=a.salePrice),a.enabledGroupDiscount&&m&&m[e])for(let i of m[e]){if(i.to.length<1){n.cost=i.price.length>0?+i.price:+a.price;break}if(t>=+i.from&&t<=+i.to){n.cost=i.price.length>0?+i.price:+a.price;break}}n.categoryInfo=a,T={...T,[e]:n}}r={...r,nonce:o,tripID:i,packageID:_,tripDate:k,tripTime:C,travelers:S,cartTotal:u,pricingOptions:T,cversion:(null===(a=wteL10n)||void 0===a?void 0:a.cart_version)||"2.0"};const L=await fetch(`${n}?action=wte_add_trip_to_cart&cart_version=${r.cversion}&_nonce=${o}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),P=await L.json();var j,x;P.success?window.location.href=null===(j=window)||void 0===j||null===(x=j.wp_travel_engine)||void 0===x?void 0:x.CheckoutURL:(P.data&&P.data[0]&&alert(P.data[0]),e(!1))}}init(){this.unsubscriber(),this.loadTemplates(),this.initTabController(),this.initCalendar(),this.eventListeners(),this.bookingProcessFlowControl()}initTabController(){var e=this;let t=this.bookingform.querySelectorAll(".wte-process-nav-item"),a=this.bookingform.querySelectorAll(".wte-process-tab-item");var n;this.tabController={tabCount:null==t?void 0:t.length,navigators:t,activeTab:"wte-booking-datetime",activeClass:"active",completedClass:"finish",nextBtn:"#wteProcessNext",prevBtn:"#wteProcessPrev",toggleNextBtn:function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const a=document.querySelector(e.nextBtn);a&&(a.disabled=t)},finalAction:(n=this,function(){let e=document.querySelector(n.tabController.nextBtn);e&&(e.disabled=!0,e.classList.add("btn-loading")),n.addToCart((function(t){e.disabled=!!t,e.classList.toggle("btn-loading",!!t)}))}),validToNextProcess:(e=>function(){let t=e.tabController,a=document.querySelector(t.nextBtn);switch(t.activeTab){case"wte-booking-datetime":const{selectedDate:t,availableTimes:n,selectedTime:i}=e._store.getState();return t&&(null==t?void 0:t.get())&&(Object.keys(n).length<1||Object.keys(n).length&&(null==i?void 0:i.get()));case"wte-booking-packages":const{cart:o}=e._store.getState();return null!=o&&o.traveler&&o.traveler>0?(a.disabled=!1,!0):(a.disabled=!0,!1);default:return!0}})(this),switchBtnText:function(){let e=WTEBooking.tabController,t=document.querySelector(e.nextBtn);e.getActiveTabIndex()>=e.tabCount-1?t.textContent=t.dataset.labelCheckout||"Add to Cart":t.textContent=t.dataset.labelDefault||"Continue"},getActiveTabIndex:function(){let e=document.getElementById(this.activeTab);return Array.prototype.indexOf.call(a,e)},handleProcessBtnClick:function(e){let t=WTEBooking.tabController;if(this.matches(t.prevBtn))t.activeTab=a[t.getActiveTabIndex()-1].id;else if(this.matches(t.nextBtn)){let e=t.getActiveTabIndex()+1;if(e>=t.tabCount)t.finalAction();else{let n=a[e].id;t.validToNextProcess()&&(t.activeTab=n)}}t.switchBtnText(),t.getActiveTabIndex()>0?document.querySelector(t.prevBtn).style.removeProperty("display"):document.querySelector(t.prevBtn).style.display="none",t.showActiveTab()},init:function(){let e=this;e.showActiveTab();let t=+e.getActiveTabIndex();t<1&&(document.querySelector(e.prevBtn).style.display="none"),document.querySelector(".wte-process-nav-list").style.setProperty("--step-bar-width",(t+1)/3*100+"%"),r.on("click",e.nextBtn,e.handleProcessBtnClick),r.on("click",e.prevBtn,e.handleProcessBtnClick)},showActiveTab:function(){let e=this,t=+e.getActiveTabIndex();if(t<0)t=0;else if(t>=e.tabCount)t=e.tabCount-1;else{document.querySelector(".wte-process-nav-list").style.setProperty("--step-bar-width",(t+1)/3*100+"%");for(let n in Array.from(e.navigators)){let i=e.navigators[n];if(n<=t){if(n<t?i.classList.add(e.completedClass):i.classList.add(e.activeClass),n==t){for(let e in Array.from(a))a[e].style.removeProperty("display");document.querySelector("a"===i.tagName.toLowerCase()?i.hash:i.dataset.target).style.display="block"}}else i.classList.remove(e.activeClass,e.completedClass)}}}},this.tabController.init()}getJSONData(){return{trip:this.trip,tripPackages:this.tripPackages,availablePackages:this.availablePackages,selectedPackage:this.selectedPackage,packageCategories:this.getPackageCategories(this.selectedPackage),travelerRecord:this.travelerRecord,groupPricings:this.selectedPackage?this.tripPackages[this.selectedPackage]["group-pricing"]:{},formatPrice:this.formatPrice,selectedDate:this.selectedDate,cartTotal:this.calculateCartTotal(),selectedTime:this.selectedTime,availableTimes:this.availableTimes,extraServices:this.extraServices}}loadTemplates(){document.getElementById("wte-booking-datetime-content").innerHTML=this.datetimeTemplate(this._store.getState()),document.getElementById("wte-booking-packages-content").innerHTML=wp.template("wte-booking-packages")(this._store.getState()),document.getElementById("wte-booking-summary").innerHTML=wp.template("wte-booking-summary")(this._store.getState()),document.dispatchEvent(new Event("wteLoadBookingTemplates"))}calculateCartTotal(){let e=this.travelerRecord,t=0;for(let n in e){let i=e[n],o=this.getPackageCategories(this.selectedPackage)[n],r=o.enabledSale?+o.salePrice:+o.price,s=this.selectedPackage?this.tripPackages[this.selectedPackage]["group-pricing"]:{};if(Object.keys(s).length>0&&s[n]){var a=s[n];for(let e of a){if(e.to.length<1){r=e.price||r;break}if(+i>=+e.from&&+i<=+e.to){r=e.price;break}}}t+=r*+i}return t}eventListeners(){var e;r.on("click",".wte-package-select-btn",(e=this,function(t){let a=this.dataset.packageId,{tripPackages:n}=e._store.getState();const i=e.getDefaultCart(a);e._store.dispatch({type:"UPDATE_STORE",data:{selectedPackage:a,packageCategories:e.getPackageCategories(a),groupPricings:a?n[a]["group-pricing"]:{},...i}})}));const t=e=>function(t){var a;let n=this,i=0;if(n.classList.contains("wte-up"))i=1;else{if(!n.classList.contains("wte-down"))return;i=-1}let{travelerRecord:o,cart:r,cartTotal:s,packageCategories:l,tripPackages:c,selectedPackage:d,trip:u,selectedTime:p,selectedDate:m,parentDateConfig:f}=e._store.getState(),g={...r},v={...o},h=n.parentElement.dataset.info;h=h&&JSON.parse(h);const w=h.catID;if(v[w]<1&&i<0)return;let y=0;if(i>0?(y=v[w]?+v[w]+1:1,g.traveler=null!=g&&g.traveler?+g.traveler+1:1):(y=v[w]&&v[w]>=1?+v[w]-1:0,g.traveler=null!=g&&g.traveler?+g.traveler-1:0),y<0)return;let b=l[w].minPax;b&&y<b&&(g.traveler=g.traveler-i*(1-b),y=i<0?0:b);let _=l[w].maxPax;var k,C,S;if(_&&y>_&&(g.traveler=g.traveler-1,y=_),""!=u.max_pax&&+u.max_pax<g.traveler)return void alert(null===(k=wteL10n)||void 0===k||null===(C=k.l10n)||void 0===C||null===(S=C.availableSeatsExceed)||void 0===S?void 0:S.replace("%s",u.max_pax));let T=-1;if(p.get()){let e=p.format("YYYY-MM-DD-HH-mm-ss").split("-");e[1]=e[1]-1,T=.001*new Date(Date.UTC(...e)).getTime()}else if(null!=m&&m.get()){let e=m.format("YYYY-MM-DD").split("-");e[1]=e[1]-1,T=.001*new Date(Date.UTC(...e)).getTime()}if(f&&u["booked-seats"]&&u["booked-seats"][T]&&parseInt(null===(a=u["booked-seats"][T])||void 0===a?void 0:a.booked)){const e=f&&null!=f&&f._seats?parseInt(f._seats)-parseInt(u["booked-seats"][T].booked):-1;var L,P,j;if(""!==f._seats&&e>-1&&e<g.traveler)return void alert(null===(L=wteL10n)||void 0===L||null===(P=L.l10n)||void 0===P||null===(j=P.availableSeatsExceed)||void 0===j?void 0:j.replace("%s",e))}else if(f){var x,E,D;if(parseInt(f._seats)<+g.traveler)return void alert(null===(x=wteL10n)||void 0===x||null===(E=x.l10n)||void 0===E||null===(D=E.availableSeatsExceed)||void 0===D?void 0:D.replace("%s",f._seats))}v={...v,[w]:y};let A=0;for(let e in v){let t=v[e],a=l[e],n=a.enabledSale?+a.salePrice:+a.price,i=c[d]["group-pricing"]||{};if(a.enabledGroupDiscount&&Object.keys(i).length>0&&i[e]){var q=i[e];for(let e of q){if(e.to.length<1){n=e.price||n;break}if(+t>=+e.from&&+t<=+e.to){n=e.price;break}}}A+="per-group"===a.pricingType?t&&+n||0:n*+t}e._store.dispatch({type:"UPDATE_STORE",data:{travelerRecord:v,cart:g,cartTotal:{...s,travelers:A}}})};r.on("click",".wte-booking-pc-counter .wte-down",t(this)),r.on("click",".wte-booking-pc-counter .wte-up",t(this)),r.on("click",".wte-time-select-btn",(e=>function(t){var a;let n=this.dataset.time,i=this.dataset.packageId.split(","),{tripPackages:o}=e._store.getState();if(null!=e&&null!==(a=e.tabController)&&void 0!==a&&a.nextBtn){const t=document.querySelector(e.tabController.nextBtn);t&&(t.disabled=!1)}n&&e._store.dispatch({type:"UPDATE_STORE",data:{selectedTime:l(new Date(+n)),availablePackages:i.map((e=>o[e])),selectedPackage:i[0]}})})(this))}getPackageCategories(e){if(!e)return{};let{tripPackages:t}=this._store.getState();return t[e]["package-categories"]}clear(){this._store.dispatch({type:"UPDATE_STORE",data:{selectedDate:l(null),selectedTime:l(null),selectedPackage:null,defaultDateFormat:"YYYY-MM-DD",packageCategories:{},travelerRecord:{},cart:{}}})}updateSelectedTime(){document.getElementById("wte-booking-times-content").innerHTML=wp.template("wte-booking-times")(this._store.getState())}getDefaultCart(e){if(!e)return;let{tripPackages:t,trip:a}=this._store.getState();const n=this.getPackageCategories(e),i={};let o={traveler:0},r=0;const s=null==a?void 0:a.primary_category;if(!n[s])return{cart:o,cartTotal:{travelers:r},travelerRecord:i};let l=n[s],c=s,d=l.enabledSale?+l.salePrice:+l.price,u=parseInt(l.minPax);i[c]=u;let p=t[e]["group-pricing"]||{};if(l.enabledGroupDiscount&&Object.keys(p).length>0&&p[c]){var m=p[c];for(let e of m){if(e.to.length<1){d=e.price||d;break}if(u>=+e.from&&u<=+e.to){d=e.price;break}}}return o.traveler=parseInt(o.traveler)+u,r+="per-group"===l.pricingType?u&&+d||0:d*u,{cart:o,cartTotal:{travelers:r},travelerRecord:i}}bookingProcessFlowControl(e){const t=this;e||this.bookingform.classList.add("wte-bp-flow");const a=document.getElementById("wte-booking-datetime"),n={dateChange:function(){if(a&&t.bookingform.classList.contains("wte-bp-flow")){const e=a.offsetHeight;let t=a.children;if(t[0]){let n=t[0].offsetHeight,i=function(){a.scrollTop<n-e&&(a.scrollTop=n-e>a.scrollTop?a.scrollTop+10:a.scrollTop,setTimeout(i))};i()}}}};n[e]&&n[e]()}initCalendar(){let e=this.getPackagesDates();const t=Object.values(e._nodates);delete e._nodates;let{tripPackages:a,trip:n,cart:i}=this._store.getState();console.debug({_dates:e});let o=e._minDate;delete e._minDate;let r={minDate:o,inline:!0,onChange:(t,i)=>{var o,r;t[0].getTimezoneOffset(),t=new Date(t[0].getTime());let s=moment(t).format("YYYY-MM-DD");this.clear();let c=[];e[s]&&(c=Object.keys(e[s]).map((e=>a[e])));const d=Object.values(a).filter((e=>Object.values(e["package-dates"]).length<1));c=[...c,...d];let u=c.map((e=>e.id)),p=(null==n||null===(o=n.packages_ids)||void 0===o?void 0:o.find((e=>u.indexOf(e)>-1)))||c[0].id,m={};const f=this.getDefaultCart(p),g=e[s]&&e[s][p]||null;if(e[s])for(let[a,i]of Object.entries(e[s])){let e=i;if(!(e._times.length<1))for(let i in e._times){var v,h;let o=e._times[i],r=null==o||null===(v=o.from)||void 0===v?void 0:v.split(":"),s=new Date(t);s.setHours(r[0]),s.setMinutes(r[1]);let l=null==o||null===(h=o.to)||void 0===h?void 0:h.split(":"),c=new Date(t);c.setHours(l[0]),c.setMinutes(l[1]);let d="_"+moment(s).format("HH-mm")+"_"+moment(c).format("HH-mm");if(m[d]){m[d].packages=[...m[d].packages,a];continue}let u=!0;const p=n["booked-seats"],C=.001*s.getTime();if(p&&p[C]){var w,y,b,_,k;u=!(null===(w=p[C])||void 0===w||!w.booked)&&+(null===(y=p[C])||void 0===y?void 0:y.booked)>0;let e=null!=g&&g._seats&&null!==(b=p[C])&&void 0!==b&&b.booked?+g._seats-+p[C].booked:-1;u=!(null!=f&&null!==(_=f.cart)&&void 0!==_&&_.traveler)&&e>0&&e>(null==f||null===(k=f.cart)||void 0===k?void 0:k.traveler)}m[d]={from:s,to:c,packages:[a],formatter:this.timeformatter,isAvailable:u}}}const C=document.querySelector(null===(r=this.tabController)||void 0===r?void 0:r.nextBtn);t&&Object.values(m).length<=0?C&&(C.disabled=!1):C&&(C.disabled=!0),this._store.dispatch({type:"UPDATE_STORE",data:{...f,parentDateConfig:g,selectedDate:l(t),availablePackages:c,selectedPackage:p,availableTimes:m,packageCategories:this.getPackageCategories(p),groupPricings:p?a[p]["group-pricing"]:{}}}),this.bookingProcessFlowControl("dateChange")},disable:[e=>!1],onReady:function(){var e;const t=document.getElementById("open-booking-modal");if(t&&(t.disabled=!1),(null===(e=window.location.search)||void 0===e?void 0:e.split("&").indexOf("action=fsd_booking"))>-1){var a,n;let e=null===(a=window.location.search)||void 0===a?void 0:a.replace("?","").split("&").map((e=>e.split("="))).find((e=>"date"===e[0]));t.click(),null===(n=arguments.length<=2?void 0:arguments[2])||void 0===n||n.setDate(e,!0)}document.dispatchEvent(new Event("bookingCalendarReady"))}};r.disable=[(e=>{let a=o;return n=>!(!o||t.length>0&&moment(n).isSameOrAfter(a)||e[moment(n).format("YYYY-MM-DD")])})({...e})],flatpickr("#wte-booking-date-calendar",r)}formatPrice(e){var t;const{currency:a,baseCurrency:n,currencySymbol:i,format:{number:o,price:r}}=wteL10n;let s={[n]:1};if("undefined"!=typeof wteCc&&null!==(t=wteCc)&&void 0!==t&&t.code)for(let e in wteCc.code)s={...s,[wteCc.code[e]]:wteCc.rate[e]};return e*=+s[a],wteL10n.helpers.priceFormat(e,a,i,r,+o.decimal,o.decimalSeparator,o.thousandSeparator)}updateSummary(){document.getElementById("wte-booking-summary").innerHTML=wp.template("wte-booking-summary")(this._store.getState())}updatePackageTabContent(){document.getElementById("wte-booking-packages-content").innerHTML=wp.template("wte-booking-packages")(this._store.getState())}_dateToUTC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("invalid date"!==(e=new Date(moment(e).tz("utc").toDate())).toString().toLowerCase()){let a=0,n=0;if(t){let e=t.split(":");a=+e[0],n=+e[1]}return new Date(Date.UTC(e.getUTCFullYear(),e.getMonth(),e.getDate(),a,n,0,0))}return e}_dateToTripTimeZone(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("invalid date"!==(e=new Date(e)).toString().toLowerCase()){if(e.setHours(0),e.setMinutes(0),e.setSeconds(0),t){let a=t.split(":");e.setHours(+a[0]),e.setMinutes(+a[1])}let a=`${moment(e).format("YYYY-MM-DDTHH:mm:ss")}${wteL10n.format.datetime.timezone}`;return new Date(a)}return e}getPackagesDates(){var e;const{tripPackages:t,trip:a}=this._store.getState();let n={_nodates:[]},o=new Date;o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),null!==(e=a.cut_off_time)&&void 0!==e&&e.enabled&&(o=moment(o).add(a.cut_off_time.duration,a.cut_off_time.duration_unit).toDate());for(let e in t){let r=t[e]["package-dates"];if(r&&Object.values(r).length<1)n._nodates=[...n._nodates,e];else for(let t in r){let s=r[t],l=i.get(s,"dtstart",null);l=l.split("-");let c=new Date(Date.UTC(l[0],+l[1]-1,l[2],0,0,0,0)),d=c.getTime(),u=c;const p=i.get(s,"times",[]),m=i.get(s,"rrule",{}),f=!!i.get(s,"is_recurring",!1),g=i.get(s,"seats","");if(moment(u).isSameOrAfter(o)){let t=.001*d;if(""!==g&&a["booked-seats"]&&a["booked-seats"][+t]&&parseInt(a["booked-seats"][+t].booked)>=+g);else{let t=l.join("-");(!n._minDate||+n._minDate>moment(t).valueOf())&&(n._minDate=moment(t).valueOf()),n[t]={...n[t]?n[t]:{},[e]:{_times:p,_rrule:m,_isRecurring:f,_seats:g}}}}if(!f)continue;const{r_frequency:v,r_until:h,r_weekdays:w,r_months:y,r_count:b}=null!=m?m:{};let _={freq:v?rrule.RRule[v.toUpperCase()]:rrule.RRule.DAILY,dtstart:c};if(h){let e=this._dateToUTC(h);if(moment(o).isAfter(e))continue;_.until=e}switch(h||(_.count=b?+b:10),v){case"WEEKLY":_.byweekday=w&&Object.values(w).map((e=>rrule.RRule[e]))||[];break;case"MONTHLY":_.bymonth=y&&Object.keys(y).map((e=>+e))||[]}let k=new rrule.RRule(_).all(),C=0;for(let t in k){let i=k[t];if(moment(i.getTime()).isBefore(o))continue;0==t&&(C=_.dtstart.getTime()-i.getTime());let r=i.getTime()+C;if(""!==g&&a["booked-seats"]&&a["booked-seats"][r]&&parseInt(a["booked-seats"][r].booked)>=+g)continue;let s=moment.tz(moment(i).toISOString(),"UTC").format("YYYY-MM-DD"),l=moment(s).valueOf();(!n._minDate||+n._minDate>l)&&(n._minDate=l),n[s]={...n[s]?n[s]:{},[e]:{_times:p,_rrule:m,_isRecurring:f,_seats:g}}}}}return n._minDate||(n._minDate=o),n}async fetchData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.trip=await o.get("trip",{id:wte.trip.id}),this.tripPackagesIds=this.trip.packages_ids||[];try{if("object"!=typeof tripPackagesIds)throw`Trip Error: No Packages Assign to the trip - ${this.trip.id}.`;this.tripPackages=await o.get("packages",{include:this.tripPackagesIds.join(","),per_page:100})}catch(e){this.tripPackages=[],console.debug(`WTE Booking: ${e.message}`)}this.pricingCategories=await o.get("categories"),e&&e()}}n(c,"state",{selectedPackage:null,selectedDate:l(null),selectedTime:l(null),packageCategories:{},travelerRecord:{},availablePackages:[],availableTimes:[],extraServices:{},loading:!0,defaultDateFormat:"YYYY-MM-DD",cart:{},formatPrice:function(e){var t;const{currency:a,baseCurrency:n,currencySymbol:i,format:{number:o,price:r}}=wteL10n;let s={[n]:1};if("undefined"!=typeof wteCc&&null!==(t=wteCc)&&void 0!==t&&t.code)for(let e in wteCc.code)s={...s,[wteCc.code[e]]:wteCc.rate[e]};return e*=+s[a],wteL10n.helpers.priceFormat(e,a,i,r,+o.decimal,o.decimalSeparator,o.thousandSeparator)},groupPricings:{},cartTotal:{travelers:0}}),n(c,"_store",null);var d=c},6867:function(e,t){"use strict";t.Z=function(e){const t=e.querySelectorAll(".tab-anchor-wrapper");t&&Array.from(t).forEach((function(a){a.querySelector(".nb-tab-trigger").addEventListener("click",(function(){Array.from(t).forEach((e=>{e.classList.remove("nav-tab-active");let t=e.querySelector(".nb-tab-trigger");t.classList.remove("nav-tab-active");let a=document.getElementById(`nb-${t.dataset.configuration}-configurations`);a&&(a.style.display="none")}));let n=this.dataset.target,i=null;i=n?document.getElementById(n):document.getElementById(`nb-${this.dataset.configuration}-configurations`),a.classList.add("nav-tab-active"),this.classList.add("nav-tab-active"),i&&(i.style.display="block"),(e.classList.contains("in-mobile")||e.classList.contains("wpte-tabs-sticky"))&&i.scrollIntoView({behavior:"smooth"})}))}))}},9623:function(e,t,a){var n={"./ar.js":[3425,3425],"./at.js":[2287,2287],"./az.js":[951,951],"./be.js":[497,497],"./bg.js":[4425,4425],"./bn.js":[9553,9553],"./bs.js":[2450,2450],"./cat.js":[656,656],"./cs.js":[3674,3674],"./cy.js":[9319,9319],"./da.js":[1254,1254],"./de.js":[5854,5854],"./default.js":[31,31],"./eo.js":[1730,1730],"./es.js":[9065,9065],"./et.js":[7215,7215],"./fa.js":[4459,4459],"./fi.js":[3647,5586],"./fo.js":[6349,6349],"./fr.js":[8358,8358],"./ga.js":[2099,2099],"./gr.js":[9885,9885],"./he.js":[5670,5670],"./hi.js":[2540,2540],"./hr.js":[9045,9045],"./hu.js":[2649,2649],"./id.js":[2146,2146],"./index.js":[9753,9753],"./is.js":[8384,8384],"./it.js":[1088,1088],"./ja.js":[546,546],"./ka.js":[3939,3939],"./km.js":[7860,7860],"./ko.js":[1890,1890],"./kz.js":[2246,2246],"./lt.js":[8084,8084],"./lv.js":[5003,5003],"./mk.js":[9790,9790],"./mn.js":[4424,4424],"./ms.js":[4917,6998],"./my.js":[4864,4864],"./nl.js":[7773,7773],"./nn.js":[2554,2554],"./no.js":[1047,1047],"./pa.js":[7667,7667],"./pl.js":[7962,7962],"./pt.js":[865,865],"./ro.js":[8066,8066],"./ru.js":[49,49],"./si.js":[6727,6727],"./sk.js":[2513,2513],"./sl.js":[1233,1233],"./sq.js":[9187,9187],"./sr-cyr.js":[7386,7386],"./sr.js":[1702,1702],"./sv.js":[1477,1477],"./th.js":[8544,8544],"./tr.js":[6847,6847],"./uk.js":[3624,3624],"./uz.js":[1351,1351],"./uz_latn.js":[776,776],"./vn.js":[5257,5257],"./zh-tw.js":[3240,4917],"./zh.js":[9509,9509]};function i(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],i=t[0];return a.e(t[1]).then((function(){return a.t(i,23)}))}i.keys=function(){return Object.keys(n)},i.id=9623,e.exports=i}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={exports:{}};return i[e].call(a.exports,a,a.exports,r),a.exports}r.m=i,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},r.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"==typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"==typeof a.then)return a}var i=Object.create(null);r.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&a;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return a[e]}}));return o.default=function(){return a},r.d(i,o),i},r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,a){return r.f[a](e,t),t}),[]))},r.u=function(e){return e+".js"},r.miniCssF=function(e){},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a={},n="wp-travel-engine:",r.l=function(e,t,i,o){if(a[e])a[e].push(t);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+i){s=u;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",n+i),s.src=e),a[e]=[t];var p=function(t,n){s.onerror=s.onload=null,clearTimeout(m);var i=a[e];if(delete a[e],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),l&&document.head.appendChild(s)}},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../"}(),function(){var e={9414:0,4885:0};r.f.j=function(t,a){var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var i=new Promise((function(a,i){n=e[t]=[a,i]}));a.push(n[2]=i);var o=r.p+r.u(t),s=new Error;r.l(o,(function(a){if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=a&&("load"===a.type?"missing":a.type),o=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,n[1](s)}}),"chunk-"+t,t)}};var t=function(t,a){var n,i,o=a[0],s=a[1],l=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);l&&l(r)}for(t&&t(a);c<o.length;c++)i=o[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0},a=self.webpackChunkwp_travel_engine=self.webpackChunkwp_travel_engine||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}(),function(){"use strict";var e={};function t(){}r.r(e),r.d(e,{calculateGrandTotal:function(){return l},numberFormat:function(){return c},phpToMomentDF:function(){return u},priceFormat:function(){return d},wteGetFormatedPrice:function(){return n},wteGetFormatedPriceWithCurrencyCode:function(){return i},wteGetFormatedPriceWithCurrencyCodeSymbol:function(){return o},wteGetFormatedPriceWithCurrencySymbol:function(){return s}}),t.hasClass=function(e,t){return e.classList?e.classList.contains(t):!!e.getAttribute("class").match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},t.addClass=function(e,a){var n=a.split(" ");e.classList?e.classList.add(n[0]):t.hasClass(e,n[0])||e.setAttribute("class",e.getAttribute("class")+" "+n[0]),n.length>1&&t.addClass(e,n.slice(1).join(" "))},t.removeClass=function(e,a){var n=a.split(" ");if(e.classList)e.classList.remove(n[0]);else if(t.hasClass(e,n[0])){var i=new RegExp("(\\s|^)"+n[0]+"(\\s|$)");e.setAttribute("class",e.getAttribute("class").replace(i," "))}n.length>1&&t.removeClass(e,n.slice(1).join(" "))},t.toggleClass=function(e,a,n){n?t.addClass(e,a):t.removeClass(e,a)},t.setAttributes=function(e,t){for(var a in t)null!=e&&e.setAttribute&&e.setAttribute(a,t[a])},t.getChildrenByClassName=function(e,a){e.children;for(var n=[],i=0;i<e.children.length;i++)t.hasClass(e.children[i],a)&&n.push(e.children[i]);return n},t.getIndexInArray=function(e,t){return Array.prototype.indexOf.call(e,t)},t.on=function(e,t,a){document.addEventListener(e,(function(e){for(var n=e.target;n&&n!=this;n=n.parentNode)if(n.matches(t)){a.call(n,e);break}}),!1)};var a=t;r(5649);function n(e,t,a){return e=e||0,t=t||!0,a=a||0,"undefined"!=typeof WTE_CC_convData&&WTE_CC_convData.rate&&(e*=parseFloat(WTE_CC_convData.rate)),0==t?e:(e=(e=(e=parseFloat(e)).toFixed(a)).replace(".00",""),e=addCommas(e))}function i(e,t,a,n){return wteL10n.priceFormat(e).format(!0,!!a)}function o(e,t,a,n,i){return wteL10n.priceFormat(e).format(!1,!!n)}function s(e,t,a,n){return wteL10n.priceFormat(e).format(!1,!!a)}function l(){return parseFloat(window.wte.trip.travellersCost)+parseFloat(window.wte.trip.extraServicesCost)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{t=Math.abs(t),t=isNaN(t)?2:t;const i=e<0?"-":"";let o=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),r=o.length>3?o.length%3:0;return i+(r?o.substr(0,r)+n:"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?a+Math.abs(e-o).toFixed(t).slice(2):"")}catch(e){console.log(e)}}function d(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"%CURRENCY_SYMBOL%%FORMATED_AMOUNT%",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:".",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:",",s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l={"%CURRENCY_CODE%":s?t:`<span class="wpte-currency-code currency">${t}</span>`,"%CURRENCY_SYMBOL%":s?a:`<span class="wpte-currency-code currency">${a}</span>`,"%AMOUNT%":s?e:`<strong class="wpte-price amount">${e}</strong>`,"%FORMATED_AMOUNT%":s?c(e,i,o,r):`<strong class="wpte-price amount">${c(e,i,o,r)}</strong>`};return n.split(/(%\w+%)/g).reduce((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return l[t]?e+l[t]:e+t}))}function u(e){var t;let a={d:"DD",D:"ddd",j:"D",l:"dddd",w:"d",F:"MMMM",M:"MMM",m:"MM",n:"M",S:"o",jS:"Do",Y:"YYYY",y:"YY"};return null===(t=e.match(/(\\?\\?[\w\W])/g))||void 0===t?void 0:t.map((e=>a[e]||e)).join("")}window.wteL10n.util=window.wteutil=a,window.wteL10n.ui=window.wteui=window.wteL10n.ui||{},window.wteL10n.ui.Accordion=window.wteui.Accordion=class{constructor(e){this.element=e,a.addClass(this.element,"wte-accordion-initialized"),this.items=a.getChildrenByClassName(this.element,"wte-accordion-item"),this.version=this.element.getAttribute("data-version")?"-"+this.element.getAttribute("data-version"):"",this.showClass="wte-accordion-open",this.animateHeight="on"==this.element.getAttribute("data-animation"),this.multiItems=!("off"==this.element.getAttribute("data-multi-items")),this.deepLinkOn="on"==this.element.getAttribute("data-deep-link"),this.initAccordion()}initAccordion(){for(var e=0;e<this.items.length;e++){var t=this.items[e].getElementsByClassName("wte-accordion-button")[0];if(t){var n=this.items[e].getElementsByClassName("wte-accordion-collapse")[0],i=a.hasClass(this.items[e],this.showClass)?"true":"false";a.setAttributes(t,{"aria-expanded":i,"aria-controls":"accordion-content-"+e,id:"accordion-header-"+e}),a.addClass(t,"wte-accordion-trigger"),a.setAttributes(n,{"aria-labelledby":"accordion-header-"+e,id:"accordion-content-"+e})}}this.initAccordionEvents(),this.initDeepLink()}initAccordionEvents(){var e=this;this.element.addEventListener("click",(function(t){var n=t.target.closest(".wte-accordion-trigger");n&&a.getIndexInArray(e.items,n.closest(".wte-accordion-item"))>=0&&e.triggerAccordion(n)}))}triggerAccordion(e){var t="true"===e.getAttribute("aria-expanded");this.animateAccordion(e,t,!1),!t&&this.deepLinkOn&&history.replaceState(null,"","#"+e.getAttribute("aria-controls"))}animateAccordion(e,t,n){var i=e.closest(".wte-accordion-item"),o=i.getElementsByClassName("wte-accordion-collapse")[0],r=t?"false":"true";a.toggleClass(i,this.showClass,!t),e.setAttribute("aria-expanded",r),o&&this.resetContentVisibility(i,o,t),(!this.multiItems&&!t||n)&&this.closeSiblings(i)}resetContentVisibility(e,t,n){a.toggleClass(e,this.showClass,!n),t.removeAttribute("style"),n&&!this.multiItems&&this.moveContent()}closeSiblings(e){for(var t=a.getIndexInArray(this.items,e),n=0;n<this.items.length;n++)if(a.hasClass(this.items[n],this.showClass)&&n!=t)return this.animateAccordion(this.items[n].getElementsByClassName("wte-accordion-trigger")[0],!0,!1),!1}moveContent(){var e=this.element.getElementsByClassName(this.showClass);if(0!=e.length){var t=e[0].getBoundingClientRect();if(t.top<0||t.top>window.innerHeight){var a=window.scrollY||document.documentElement.scrollTop;window.scrollTo(0,t.top+a)}}}initDeepLink(){if(this.deepLinkOn){var e=window.location.hash.substr(1);if(e&&""!=e){var t=this.element.querySelector('.wte-accordion-trigger[aria-controls="'+e+'"]');t&&"true"!==t.getAttribute("aria-expanded")&&(this.animateAccordion(t,!1,!0),setTimeout((function(){t.scrollIntoView(!0)})))}}}},window.wteL10n.helpers=window.wtehelpers=e,window.addCommas||(window.addCommas=e=>{for(var t=(e+="").split("."),a=t[0],n=t.length>1?"."+t[1]:"",i=/(\d+)(\d{3})/;i.test(a);)a=a.replace(i,"$1"+WPTE_Price_Separator+"$2");return a+n}),window.wteGetFormatedPrice=n,window.wteGetFormatedPriceWithCurrencyCode=i,window.wteGetFormatedPriceWithCurrencyCodeSymbol=o,window.wteGetFormatedPriceWithCurrencySymbol=s,window.calculateGrandTotal=l;const p=function(e){const{currency:t,baseCurrency:a,currencySymbol:n,format:{number:i,price:o}}=wteL10n;let r={"%CURRENCY_CODE%":`${t}`,"%CURRENCY_SYMBOL%":`${n}`,"%AMOUNT%":""+(e*=+{[a]:1}[t]),"%FORMATED_AMOUNT%":`${c(e,+i.decimal,i.decimalSeparator,i.thousansSeparator)}`};return o.split(/(%\w+%)/g).reduce((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return r[t]?e+r[t]:e+t}))};a.on("click",".wte-popper button",(function(e){let t=this.closest(".wte-popper");t&&a.toggleClass(t,"active",!a.hasClass(t,"active"))}));const m=function(e){if(!a.hasClass(e,"wte-price-field")){let t=e.parentElement,a=document.createElement("input");a.type="hidden",a.name=e.name,a.value=e.value,e.name="",e.value=p(e.value),t.appendChild(a),e.addEventListener("focus",(function(){e.value=a.value})),e.addEventListener("blur",(function(){a.value=e.value,e.value=p(e.value)})),e.classList.add("wte-price-field")}};function f(e){var t=wteL10n.version,a=document.querySelectorAll("[class*=_wte_update_notice_], [data-wte-update]");if(a)for(var n in a){var i=a[n];if(i.classList)if(i.classList.contains(`_wte_update_notice_${t}`))i.classList.remove(`_wte_update_notice_${t}`);else{var o=new RegExp(`^(wte_(new|updated|note)_${t})$`);if(i.dataset.wteUpdate.match(o)){var r=i.dataset.wteUpdate;i.classList.add(r),i.removeAttribute("data-wte-update")}}}}window.wteL10n.ui.priceField=m,document.addEventListener("wteEditPackageRender",(function(){var e;null===(e=document.querySelectorAll('[data-wte-field-type="price"]'))||void 0===e||e.forEach((function(e){m(e)}))})),a.on("change","[data-toggle-target]",(function(e){let t=document.querySelector(this.dataset.toggleTarget);t&&(this.checked?t.style.removeProperty("display"):t.style.display="none")})),a.on("click",".wpte-edit-booking-detail",(function(e){e.preventDefault(),this.closest(".wpte-block").querySelectorAll("select, input").forEach((function(e){e.dataset.attribName&&(e.name=e.dataset.attribName),e.dataset.attribValue&&(e.value=e.dataset.attribValue),e.dataset.attribType&&(e.type=e.dataset.attribType),e.disabled&&(e.disabled=!1),e.type&&(e.readOnly=!1)})),this.closest(".wpte-block").querySelectorAll(".show_on_edit").forEach((function(){this.style.removeProperty("display")}))})),a.on("click",".wte-email-template-updater",(function(e){e.preventDefault();var t=document.getElementById(this.dataset.target);t&&t.submit()})),document.addEventListener("wteSettingsTabContentLoaded",f),document.addEventListener("DOMContentLoaded",(e=>{f();var t=document.querySelectorAll(".wte-code");t&&t.forEach((function(e){e.dataset.height&&(e.style.height=e.dataset.height+"px"),hljs&&hljs.highlightBlock(e)})),a.on("click",".wte-onclick-toggler",(function(e){if(e.preventDefault(),this.dataset.target){var t=document.querySelector(this.dataset.target);t&&(Array.from(t.classList).includes("visible")?(t.classList.remove("visible"),t.style.display="none"):(t.style.removeProperty("display"),t.classList.add("visible")))}}))})),window.wteL10n=window.wteL10n||{};const g=function(e){this._value=e,this._getPriceFormat=function(){return wteL10n.format.price},this.get=function(){return this._value},this.format=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{currency:n,baseCurrency:i,currencySymbol:o,baseCurrencySymbol:r,format:{number:s,price:l}}=wteL10n;let c={[i]:1};if("undefined"!=typeof wteCc&&null!==(e=wteCc)&&void 0!==e&&e.code&&a)for(let e in wteCc.code)c={...c,[wteCc.code[e]]:wteCc.rate[e]};let d=+this._value*(a?+c[n]:1);return wtehelpers.priceFormat(d,a?n:i,a?o:r,l,+s.decimal,s.decimalSeparator,s.thousandSeparator,t)}};window.wteL10n.priceFormat=window.wteL10n.priceFormat||function(e){return new g(e)};const v=function(e){this._time=e,this.get=function(){return this._time},this.set=function(e){this._time=e},this._getTimeFormat=function(){return wteL10n.helpers.phpToMomentDF(wteL10n.format.datetime.date)},this.format=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(wteL10n.format.datetime.timezone,!this._time)return this._time;if(e)return moment(this._time).format(e);let a=moment(this._time).format(this._getTimeFormat());return a+=t?" at "+moment(this._time).format("h:mm A"):"",a},this.getDatewithOffset=function(e){if(this._time){let t=moment(this._time).utc().format("YYYY-MM-DDTHH:mm:ss")+e;return new Date(t)}}};window.wteL10n.dateFormat=window.wteL10n.dateFormat||function(e){return new v(e)}}(),function(){var e;function t(e){for(var t=(e+="").split("."),a=t[0],n=t.length>1?"."+t[1]:"",i=/(\d+)(\d{3})/;i.test(a);)a=a.replace(i,"$1"+WPTE_Price_Separator+"$2");return a+n}function a(){var e=document.querySelectorAll("a[data-configuration]");e&&e.forEach((e=>{var t=".nb-"+e.getAttribute("data-configuration")+"-configurations",a=document.querySelector(t);e.closest(".tab-anchor-wrapper").appendChild(a)}))}function n(){var e=document.querySelectorAll(".nb-configurations"),t=document.querySelector("#tabs-container .tab-content");e&&e.forEach((e=>{t.appendChild(e)}))}jQuery((function(e){if(!wte.single_showtabs){e(".tab-inner-wrapper .tab-anchor-wrapper:first-child").addClass("nav-tab-active");const t=document.getElementById("tabs-container");t&&new(0,r(6867).Z)(t),e(".tab_content").hide(),e(".tab_content:first").show(),e("ul.tabs li").click((function(){e(".tab_content").hide();var t=e(this).attr("rel");e("#"+t).fadeIn(),e("ul.tabs li").removeClass("active"),e(this).addClass("active"),e(".tab_drawer_heading").removeClass("d_active"),e(".tab_drawer_heading[rel^='"+t+"']").addClass("d_active")})),e(".tab_drawer_heading").click((function(){e(".tab_content").hide();var t=e(this).attr("rel");e("#"+t).fadeIn(),e(".tab_drawer_heading").removeClass("d_active"),e(this).addClass("d_active"),e("ul.tabs li").removeClass("active"),e("ul.tabs li[rel^='"+t+"']").addClass("active")})),e("ul.tabs li").last().addClass("tab_last")}e((function(){var t=e(".payment-check");!1===t.is(":checked")&&t.is(":visible")&&(t.filter("[value=paypal]").prop("checked",!0),e(".stripe-button").removeClass("active"),e(".stripe-button-el").hide(),e("#wp-travel-engine-order-form").attr("action",WP_OBJ.link.paypal_link))})),e("body").on("click",".paypal-form",(function(t){var a=e(".stripe_checkout_app").attr("src");e(".stripe_checkout_app").attr("src",""),e(".stripe_checkout_app").attr("src",a),e("#wp-travel-engine-order-form").submit()})),e("body").on("click",".payment-check",(function(t){e(this).is(":checked")&&("stripe"==e(this).attr("value")&&(e("#wp-travel-engine-order-form").attr("action",WP_OBJ.link.form_link),e(".paypal-form").hide(),e(".stripe-form").fadeIn("slow"),e(".stripe-button").addClass("active"),e(".stripe-button-el").show()),"paypal"==e(this).attr("value")&&(e("#wp-travel-engine-order-form").attr("action",WP_OBJ.link.paypal_link),e(".stripe-button").removeClass("active"),e(".stripe-button-el").hide(),e(".paypal-form").fadeIn("slow")))})),e("body").on("click",".check-availability",(function(t){t.preventDefault(),e(".date-time-wrapper").fadeIn("slow")})),e("body").on("click",".check-availability",(function(t){t.preventDefault(),e(".wp-travel-engine-price-datetime").focus()})),e("body").on("click",".wp-travel-engine-cart",(function(t){t.preventDefault(),trip_id=e(this).attr("data-id"),nonce=e(this).attr("data-nonce"),jQuery.ajax({type:"post",dataType:"json",url:WTEAjaxData.ajaxurl,data:{action:"wp_add_trip_cart",trip_id:trip_id,nonce:nonce},success:function(t){"already"===t.type?(e(".wp-cart-message-"+trip_id).css("color","orange"),e(".wp-cart-message-"+trip_id).html(t.message).fadeIn("slow").delay(3e3).fadeOut("slow")):"success"===t.type?(e(".wp-cart-message-"+trip_id).css("color","green"),e(".wp-cart-message-"+trip_id).html(t.message).fadeIn("slow").delay(3e3).fadeOut("slow")):(e(".wp-cart-message-"+trip_id).css("color","red"),e(".wp-cart-message-"+trip_id).html(t.message).fadeIn("slow").delay(3e3).fadeOut("slow")),e(".wte-update-cart-button-wrapper:visible").length<1&&e(".wte-update-cart-button-wrapper").css("display","block")}})})),e("#price-loading").fadeOut(2e3),e(".price-holder").fadeIn(2e3),e("body").on("change",".travelers-number",(function(a){$val=e(this).val(),$new_val=e(this).parent().parent().siblings(".trip-price-holder").children(".cart-price-holder").text().replace(/,/g,""),$total=$val*$new_val,$total=t($total),e(this).parent().parent().siblings(".cart-trip-total-price").children(".cart-trip-total-price-holder").text($total),$sum=0,e(".cart-trip-total-price-holder").each((function(t){$tcost=e(this).text().replace(/,/g,""),$sum=parseInt($sum)+parseInt($tcost)})),$sum=t($sum),e(".total-trip-price").text($sum),$value=0,$val1=parseInt(e("span.travelers-number").text()),e("input.travelers-number").each((function(t){""!==e(this).val()&&($value=parseInt($value)+parseInt(e(this).val()))})),$travelers=parseInt($value)+parseInt($val1),e(".total-trip-travelers").text($travelers)})),e("#wp-travel-engine-cart-form").on("submit",(function(t){t.preventDefault();var a=e("#wp-travel-engine-cart-form").serialize(),n=e("#update_cart_action_nonce").val();jQuery.ajax({type:"post",url:WTEAjaxData.ajaxurl,data:{action:"wte_update_cart",nonce:n,data2:a},success:function(){e(".wte-update-cart-msg").text(WPMSG_OBJ.ajax.success),e(".wte-update-cart-msg").css("color","green").fadeIn("slow").delay(3e3).fadeOut("slow")}})})),e("#wte_payment_options").on("change",(function(t){var a=e("#wte_payment_options :selected").val();t.preventDefault(),""!=a&&e("#price-loader").fadeIn("slow").delay("3000").fadeOut("3000")})),e(".accordion-tabs-toggle").next().hasClass("show"),e(".accordion-tabs-toggle").next().removeClass("show"),e(".accordion-tabs-toggle").next().slideUp(350),e(document).on("click",".faq-row .accordion-tabs-toggle",(function(){var t=e(this);t.siblings(".faq-content").toggleClass("show"),t.toggleClass("active"),t.siblings(".faq-content").slideToggle(350),t.find(".dashicons.dashicons-arrow-down.custom-toggle-tabs").toggleClass("open")})),e(document).on("click",".expand-all-faq",(function(t){t.preventDefault(),e(this).children("svg").hasClass("fa-toggle-off")&&e(this).children("svg").toggleClass("fa-toggle-on"),e(this).children("svg").hasClass("fa-toggle-on")&&e(this).children("svg").toggleClass("fa-toggle-off"),e(".faq-row .accordion-tabs-toggle").toggleClass("active"),e(".faq-row").children(".faq-content").toggleClass("show"),e(".faq-row").children(".faq-content").slideToggle(350),e(".faq-row").find(".dashicons.dashicons-arrow-down.custom-toggle-tabs").toggleClass("open")})),e(".wp-travel-engine-faq-tab-header input.checkbox").on("change",(function(){e(this).is(":checked")?(e(this).closest(".wp-travel-engine-faq-tab-header").siblings(".wp-travel-engine-faq-tab-content").children().addClass("row-active"),e(".row-active").find(".accordion-tabs-toggle .rotator").addClass("open"),e(".row-active").find(".accordion-tabs-toggle").addClass("active"),e(".row-active").find(".faq-content").slideDown(),e(".row-active").find(".faq-content").addClass("show")):(e(this).closest(".wp-travel-engine-faq-tab-header").siblings(".wp-travel-engine-faq-tab-content").children().removeClass("row-active"),e(".faq-row").find(".accordion-tabs-toggle .rotator").removeClass("open"),e(".faq-row").find(".accordion-tabs-toggle").removeClass("active"),e(".faq-row").find(".faq-content").slideUp(),e(".faq-row").find(".faq-content").removeClass("show"))})),e('form[name="wte_enquiry_contact_form"]').submit((function(t){if(t.preventDefault(),e("#wte_enquiry_contact_form").parsley().isValid()){e("#enquiry_submit_button").prop("disabled",!0);var a=jQuery("#redirect-url").val(),n=new FormData(this);e.ajax({dataType:"json",type:"post",processData:!1,contentType:!1,url:WTEAjaxData.ajaxurl,data:n,success:function(t){"success"===t.type?jQuery(".success-msg").html(t.message).fadeIn("slow").delay("3000").fadeOut("3000",(function(){window.location.href=a})):"error"===t.type?(jQuery("#enquiry_email").css("border","1px solid red"),jQuery(".failed-msg").html(t.message).fadeIn("slow").delay("3000").fadeOut("slow",(function(){jQuery("#enquiry_email").css("border","1px solid #d1d1d1"),jQuery("#enquiry_submit_button").prop("disabled",!1)}))):jQuery(".failed-msg").html(t.message).fadeIn("slow").delay("3000").fadeOut("slow",(function(){e("#enquiry_submit_button").prop("disabled",!1)}))}})}})),e("#wp-travel-engine-order-form").submit((function(t){if("Himalayan-Bank"!=e("#wte_payment_options :selected").val()){var a=e(this),n=a.find("input[name=amount]").val();!isNaN(n)&&n.length>0&&(options_val=n,e("<input>").attr({type:"hidden",id:"amount",name:"amount",value:options_val}).appendTo(a))}})),e("#wte_payment_options").on("change",(function(t){var a=e("#wte_payment_options :selected").val();if(t.preventDefault(),""==a||"Test Payment"==a)return e("#wte-checkout-payment-fields").html(""),e("#wp-travel-engine-order-form").attr("action",Url.normalurl),e(".wp-travel-engine-billing-details-wrapper").html(response.data),e(".stripe-button:visible").remove(),e(".stripe-button-el").remove(),e(".wp-travel-engine-submit").show(),void e(".wte-authorize-net-wrap").remove();"PayPal"==a&&jQuery.ajax({type:"post",url:WTEAjaxData.ajaxurl,data:{action:"wte_payment_gateway",val:a,_nonce:WTEAjaxData.nonce},success:function(t){"PayPal"==a&&(e("#wp-travel-engine-order-form").attr("action",Url.paypalurl),e(".wp-travel-engine-billing-details-wrapper").html(t.data),e("#wte-checkout-payment-fields").html(t.data),e(".stripe-button:visible").remove(),e(".stripe-button-el").remove(),e(".wp-travel-engine-submit").show(),e(".wte-authorize-net-wrap").remove()),"Test Payment"==a&&(e("#wp-travel-engine-order-form").attr("action",Url.normalurl),e(".wp-travel-engine-billing-details-wrapper").html(t.data),e(".stripe-button:visible").remove(),e(".stripe-button-el").remove(),e(".wp-travel-engine-submit").show(),e(".wte-authorize-net-wrap").remove())}})})),e("body").on("keyup","#cost_includes",(function(t){e("#include-result").val(e("#cost_includes").val()),e("#include-result").val("<li>"+e("#include-result").val().replace(/\n/g,"</li><li>")+"</li>")})),e("body").on("keyup","#cost_excludes",(function(t){e("#exclude-result").val(e("#cost_excludes").val()),e("#exclude-result").val("<li>"+e("#exclude-result").val().replace(/\n/g,"</li><li>")+"</li>")})),e("body").on("keyup",".itinerary-content",(function(t){e(this).siblings(".itinerary-content-inner").val(e(this).val()),e(this).siblings(".itinerary-content-inner").val("<p>"+e(this).val().replace(/\n/g,"</p><p>")+"</p>")})),e(document).on("click",".expand-all-itinerary",(function(t){t.preventDefault(),e(".itinerary-row").children(".itinerary-content").slideToggle(350),e(this).children("svg").hasClass("fa-toggle-on")?e(this).children("svg").addClass("fa-toggle-off"):e(this).children("svg").addClass("fa-toggle-on"),e(".itinerary-row").children(".itinerary-content").toggleClass("show"),e(".itinerary-row").find(".dashicons.dashicons-arrow-down.custom-toggle-tabs").toggleClass("open")})),e(document).on("click",".less-no",(function(t){$val=e(this).next("input").val(),0!=$val&&($val=parseInt($val)-1,e(this).next("input").val($val))})),e(document).on("click",".more-no",(function(t){if($val=e(this).prev("input").val(),""==$val)return $val=1,void e(this).prev("input").val($val);$val=parseInt($val)+1,e(this).prev("input").val($val)})),e("#wp-travel-engine-new-checkout-form").parsley(),e("form.wpte-lrf-form").parsley(),e("#wte-send-enquiry-message").click((function(e){e.preventDefault(),document.getElementById("wte_enquiry_contact_form").scrollIntoView({behavior:"smooth",block:"center"})})),e("#wte_enquiry_contact_form").parsley(),e(".wte-ordering").on("change","select.orderby",(function(){e(this).closest("form").submit()})),e(window).on("load",(function(){e(window).width()<1025?e(".single-trip .wte_enquiry_contact_form-wrap").insertAfter(".single-trip .widget-area .wpte-bf-outer"):e(".single-trip .widget-area .wte_enquiry_contact_form-wrap").insertAfter(".single-trip .site-main")}));var a=document.querySelectorAll(".wpte-enhanced-select");function n(e,t){null!=e&&null!=t&&e.contentWindow.postMessage(JSON.stringify(t),"*")}function i(e,t){var a,i,o,r,s;if(i=(a=e.find(".slick-current")).attr("class").split(" ")[1],r=a.find("iframe").get(0),o=a.data("video-start"),"vimeo"===i)switch(t){case"play":null!=o&&o>0&&!a.hasClass("started")&&(a.addClass("started"),n(r,{method:"setCurrentTime",value:o})),n(r,{method:"play",value:1});break;case"pause":n(r,{method:"pause",value:1})}else if("youtube"===i)switch(t){case"play":n(r,{event:"command"}),n(r,{event:"command",func:"playVideo"});break;case"pause":n(r,{event:"command",func:"pauseVideo"})}else"video"===i&&null!=(s=a.children("video").get(0))&&("play"===t?s.play():s.pause())}a&&a.forEach((function(t){e(t).select2({closeOnSelect:!1,allowClear:!1})})),e(".wte-trip-vidgal-popup-trigger").on("click",(function(t){t.preventDefault();var a=e(this).data("variable");e.fancybox.open(window[a],{buttons:["zoom","slideShow","fullScreen","close"]})}));var o=e(".main-slider");o.slick&&(o.on("beforeChange",(function(t,a){i(a=e(a.$slider),"pause")})),o.on("afterChange",(function(t,a){i(a=e(a.$slider),"play")})),o.slick({lazyLoad:"progressive",slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!1,fade:!0,asNavFor:".slider-nav",cssEase:"cubic-bezier(0.87, 0.03, 0.41, 0.9)"}),e(".slider-nav").slick({slidesToShow:3,slidesToScroll:1,asNavFor:".main-slider",dots:!1,arrows:!0,focusOnSelect:!0}))})),function(){var e=document.querySelectorAll(".wpte-bf-toggle-wrap");function t(e,t){return function a(n){var i=e.querySelector(".wpte-bf-toggle-content");e.className.indexOf("wpte-bf-active")>-1?function(e,t){var a=1;!function n(){if((a-=.05)<=0)return e.style.removeProperty("opacity"),e.style.display="none",void t();e.style.opacity=a,requestAnimationFrame(n)}()}(i,(function(){document.removeEventListener("click",a),e.classList.remove("wpte-bf-active"),t()})):(e.className.indexOf("wpte-bf-active")<0?e.classList.add("wpte-bf-active"):e.classList.remove("wpte-bf-active"),t())}}e&&e.forEach((function(e){var a=e.querySelector(".wpte-bf-toggle-title"),n=(e.querySelector(".wpte-bf-toggle-content"),e.querySelector(".wpte-bf-toggle-close"));n&&n.addEventListener("click",(function(a){a.preventDefault(),t(e)})),a&&a.addEventListener("click",(function(n){document.addEventListener("click",t(e,(function(){var t=a.querySelector(".wtebf-toggle-title"),n=a.querySelector(".wtebf-toggle-title-active");n&&(n.style.display=e.className.indexOf("wpte-bf-active")>-1?"block":"none"),t&&(t.style.display=e.className.indexOf("wpte-bf-active")<0?"block":"none")})))}))}));var a=document.getElementById("wpte_price-toggle-btn-mb");if(a){var n=a.closest(".wpte-booking-area");if(n){var i=null==n?void 0:n.querySelector(".wpte-bf-price-wrap");a.onclick=function(){this.classList.toggle("active"),null==i||i.classList.toggle("show"),null!=i&&i.style.maxHeight?i.style.maxHeight=null:i.style.maxHeight=i.scrollHeight+"px"}}}}(),window.innerWidth<768?a():n(),null===(e=document.getElementById("tabs-container"))||void 0===e||e.classList.toggle("in-mobile",window.innerWidth<768),window.onresize=function(){var e;null===(e=document.getElementById("tabs-container"))||void 0===e||e.classList.toggle("in-mobile",window.innerWidth<768),window.innerWidth<768?a():n()},window.onscroll=function(){var e=document.querySelectorAll(".wpte-tabs-container.wpte-tabs-sticky .tab-content .nb-configurations"),t={},a=0;Array.prototype.forEach.call(e,(function(e){t[e.id]=e.offsetTop}));var n=document.documentElement.scrollTop||document.body.scrollTop;for(a in t)if(t[a]<=n+100){const e=a.split("");var i=document.querySelector('[data-configuration="'+e[3]+'"]');document.querySelector(".nav-tab-active").classList.remove("nav-tab-active"),i.classList.add("nav-tab-active")}var o=document.querySelector(".wpte-tabs-container");n=document.documentElement.scrollTop||document.body.scrollTop,o&&o.classList.contains("wpte-tabs-sticky")&&o.classList.toggle("fixed-header",o.offsetTop<=n)}}(),jQuery((function(e){var t={acceptedFiles:"image/jpeg, image/gif, image/png",maxFiles:1,url:wte_account_page.ajax_url,uploadMultiple:!1,resizeWidth:1500,resizeMimeType:"image/jpeg",resizeMethod:"crop",resizeQuality:65,createImageThumbnails:!1,maxFilesize:2,dictDefaultMessage:"",clickable:!0},a=e("#profile-img");if(document.querySelector("#profile-img")){var n=new Dropzone("#profile-img .wpte-img-upload-icon",t);n.on("sending",(function(e,t,a){var n=document.getElementsByName("user_profile_image_nonce")[0].value;a.append("action","wte_user_profile_image_upload"),a.append("nonce",n)})),n.on("success",(function(e,t){if("error"!==t){var n=JSON.parse(t);a.find(".img").html("<img src='"+n.url+"'>"),a.find("input[name='user_profile_image']").val(n.file),a.find("input[name='user_profile_image_url']").val(n.url),a.find(".dz-preview").remove()}})),n.on("addedfile",(function(e){a.find(".wte-profile-img-delete").css("display","block"),a.find(".wte-profile-img-delete").on("click",(function(t){a.find("input[name='user_profile_image']").val(""),a.find("input[name='user_profile_image_url']").val(""),n.removeFile(e),a.find(".wte-profile-img-delete").css("display","none")}))}))}function i(e){var t=window.location.href.split("#");window.location=t[0]+e}function o(){e(".wpte-lrf-wrap.wpte-register").slideUp("slow"),e(".wpte-lrf-wrap.wpte-login").slideDown("slow"),e(".social-label.wpte-register").css("display","none"),e(".social-label.wpte-login").css("display","block")}function r(){e(".wpte-lrf-wrap.wpte-register").slideDown("slow"),e(".wpte-lrf-wrap.wpte-login").slideUp("slow"),e(".social-label.wpte-register").css("display","block"),e(".social-label.wpte-login").css("display","none")}e(document).on("click",".wte-profile-btns .wte-profile-img-delete",(function(e){n.removeAllFiles(),a.find("input[name='user_profile_image']").val(""),a.find("input[name='user_profile_image_url']").val(""),a.find(".img img").remove(),a.find(".wte-profile-img-delete").css("display","none")})),e(document).on("click",".dz-preview .dz-error-mark",(function(e){a.find(".dz-preview").remove()})),e("form.wpte-lrf").parsley(),e("a#wpte-show-login-form").click((e=>{e.preventDefault(),i(e.target.hash),o()})),e("a#wpte-show-register-form").click((e=>{e.preventDefault(),i(e.target.hash),r()})),function(){var e=window.location.href.split("#");let t={login:o,signup:r};e[1]&&t[e[1]]&&t[e[1]]()}()})),jQuery((function(e){e(".wpte-dashboard .wpte-lrf-userprogile > a").on("click",(function(t){t.stopPropagation(),e(this).parent(".wpte-lrf-userprogile").toggleClass("active"),e(this).siblings(".lrf-userprofile-popup").stop(!0,!1,!0).slideToggle()})),e(".wpte-dashboard .wpte-lrf-userprogile .lrf-userprofile-popup").on("click",(function(e){e.stopPropagation()})),e("body, html").on("click",(function(){e(".wpte-lrf-userprogile").removeClass("active"),e(".lrf-userprofile-popup").slideUp()})),e(".wpte-dashboard .wpte-lrf-sidebar .wpte-lrf-tab").on("click",(function(){var t=e(this).attr("class").split(" ")[1];console.log(t),e(".wpte-lrf-tab").removeClass("active"),e(this).addClass("active"),e(".wpte-dashboard .wpte-lrf-content-area .wpte-lrf-tab-content").removeClass("active"),e("."+t+"-content").addClass("active")})),e(".lrf-bookings-content .wpte-bookings-tabmenu .wpte-booking-menu-tab").on("click",(function(){console.log("bookingmenu");var t=e(this).attr("class").split(" ")[1];console.log(t),e(".wpte-booking-menu-tab").removeClass("active"),e(this).addClass("active"),e(".lrf-bookings-content .wpte-booking-tab-main .wpte-booking-tab-content").removeClass("active"),e("."+t+"-content").addClass("active")})),e(".lrf-toggle .lrf-toggle-box").on("click",(function(){e(this).toggleClass("active"),e(this).parents(".lrf-toggle").siblings(".wpte-lrf-popup").stop(!0,!1,!0).slideToggle()})),e(window).keyup((function(t){"Escape"==t.key&&(e(".wpte-lrf-userprogile").removeClass("active"),e(".lrf-userprofile-popup").slideUp(),e(this).removeClass("active"),e(".wpte-lrf-popup").slideUp())})),e(".wte-dbrd-tab").click((function(t){t.preventDefault();var a=e(this).data("tab");e(".wpte-lrf-sidebar .wpte-lrf-tab").removeClass("active"),e(".wpte-lrf-sidebar .lrf-"+a).addClass("active"),e(".wpte-lrf-main .wpte-lrf-tab-content").removeClass("active"),e(".wpte-lrf-main .lrf-"+a).addClass("active")})),jQuery.fn.fancybox&&jQuery(".wpte-magnific-popup").fancybox({type:"inline",baseClass:"wte-fb-popup"})})),document.getElementById("wp-travel-engine-new-checkout-form")&&new class{constructor(e){this.checkoutForm=e,this.defaultPaymentMethods=["booking_only"],this.initialize()}initialize(){var e,t;this.paymentMethods=this.checkoutForm.querySelectorAll("[name=wpte_checkout_paymnet_method]"),this.paymentModes=this.checkoutForm.querySelectorAll("[name=wp_travel_engine_payment_mode]"),this.selectedPaymentMethod=null===(e=this.paymentMethods)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.value,this.handlePaymentModeChange.bind(this),this.submitButton=this.checkoutForm.querySelector("[type=submit]"),this.addEventListener(this.paymentMethods,"change",this.handlePaymentMethodChange),this.addEventListener(this.paymentModes,"change",this.handlePaymentModeChange),window.addEventListener("load",this.updateButtonLabel.bind(this)),window.addEventListener("load",(()=>{if("createEvent"in document){let e=new Event("change"),t=this.checkoutForm.querySelector("[name=wpte_checkout_paymnet_method]:checked");t&&t.dispatchEvent(e);let a=this.checkoutForm.querySelector("[name=wp_travel_engine_payment_mode]:checked");a&&a.dispatchEvent(e)}})),this.submitButton.disabled=!1}disablePartialPayment(){this.checkoutForm.querySelector(".wpte-bf_downpayment-options")}addEventListener(e,t,a){e.forEach((e=>{e.addEventListener(t,a.bind(this))}))}priceFormat(e){return wteL10n.priceFormat(e)}getButtonLabel(){var e;this.defaultBtnLabel||(this.defaultBtnLabel=(null===(e=this.submitButton)||void 0===e?void 0:e.value)||"Book Now",this.customBtnLabel=this.submitButton.dataset.checkoutLabel||"Pay %s");const t=this.getPaymentMethod();return["booking_only","direct_bank_transfer","check_payments"].includes(t)?this.defaultBtnLabel:this.customBtnLabel.replace("%s",this.priceFormat(this.getTotalByMode()).format(!0))}updateButtonLabel(){this.submitButton&&(this.submitButton.value=this.getButtonLabel())}getTotalByMode(){var e,t,a,n,i,o;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r||(r=this.getPaymentMode()),console.debug({wptravelengineCart:window.wptravelengineCart});const s={partial:(null===(e=window)||void 0===e||null===(t=e.wptravelengineCart)||void 0===t||null===(a=t.cart_totals)||void 0===a?void 0:a.cart_total_partial)||0,full_payment:(null===(n=window)||void 0===n||null===(i=n.wptravelengineCart)||void 0===i||null===(o=i.cart_totals)||void 0===o?void 0:o.total)||0,remaining_payment:wte.payments.total-wte.payments.total_partial};return(null==s?void 0:s[r])||s.full_payment}getPaymentMode(){var e;return(null===(e=this.checkoutForm.querySelector("[name=wp_travel_engine_payment_mode]:checked"))||void 0===e?void 0:e.value)||"full_payment"}getPaymentMethod(){var e;return(null===(e=this.checkoutForm.querySelector("[name=wpte_checkout_paymnet_method]:checked"))||void 0===e?void 0:e.value)||"booking_only"}handlePaymentMethodChange(e){var t;e.target.checked&&(this.selectedPaymentMethod=e.target.value);const a=this.checkoutForm.querySelectorAll(".wpte-checkout-payment-info");a&&a.forEach((function(e){e.classList.add("hidden"),e.parentElement.classList.remove("wpte-active-payment-method")})),e.target.parentElement.classList.add("wpte-active-payment-method");var n=document.getElementById(e.target.dataset.targetInfo);n&&!n.classList.remove("hidden",!1)&&n.style.removeProperty("display");const i=this.defaultPaymentMethods.includes(this.selectedPaymentMethod);this.togglePaymentOptions(i),i&&document.getElementById("wp_travel_engine_payment_mode-full")&&(document.getElementById("wp_travel_engine_payment_mode-full").checked=!0),this.handlePaymentModeChange();const o=null===(t=document.getElementById("wp_travel_engine_payment_mode-full"))||void 0===t?void 0:t.checked;this.toggleInfoTable(i||o),this.updateButtonLabel()}toggleInfoTable(e){const t=document.querySelector(".wpte-bf-extra-info-table");t&&t.classList.toggle("hidden",e)}togglePaymentOptions(e){let t=this.checkoutForm.querySelector(".wpte-bf_downpayment-options");t&&t.classList.toggle("hidden",e)}handlePaymentModeChange(){const e=this.getPaymentMode();this.toggleInfoTable("partial"!==e);const t=this.getTotalByMode(e);document.querySelector(".wpte-bf-total-price .wpte-price-wrap").innerHTML=this.priceFormat(t).format(!0),this.updateButtonLabel()}}(document.getElementById("wp-travel-engine-new-checkout-form")),(async()=>{if(document.getElementById("wte-checkout-coupon")){const{default:e}=await r.e(5802).then(r.bind(r,5802));console.log(e),new e(document.getElementById("wte-checkout-coupon")||null)}})(),jQuery.fn.parsley||(jQuery.fn.parsley=()=>{}),async function(e,t){if(console.debug(e),e&&null!=e&&e.l10ns&&t){const a=t.split("_");try{await r(9623)(`./${a[0]}.js`)}catch(e){console.warn("language file not found.")}null==e||e.localize(e.l10ns[a[0]]||e.l10ns.en)}}(window.flatpickr,window.wteL10n.locale),function(e){var t=document.querySelectorAll(".wte-search-terms-list");function a(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(a){e.classList.toggle("visible",t)}}if(t)for(var n=0;n<t.length;n++){var i=t[n].querySelector(".wte-terms-more");if(i){var o=i.querySelector(".show-more"),r=i.querySelector(".show-less");o&&o.addEventListener("click",a(i,!0)),r&&r.addEventListener("click",a(i,!1))}}const s=e=>function(t,a){const n=e.querySelector("[data-value]"),i=e.querySelector("[data-value-min]"),o=e.querySelector("[data-value-max]"),r=e.querySelector("[data-value-min-display]"),s=e.querySelector("[data-value-max-display]"),l="price"===e.dataset.valueFormat;n&&(n.value=l?wteL10n.priceFormat(a.values[0]).format(!0)+" - "+wteL10n.priceFormat(a.values[1]).format(!0):a.values[0]+" "+(e.dataset.suffix||"")+" - "+a.values[1]+" "+(e.dataset.suffix||"")),i&&(i.value=a.values[0]),o&&(o.value=a.values[1]);const c=e.querySelectorAll(".ui-slider-handle");r&&(r.innerHTML=l?wteL10n.priceFormat(a.values[0]).format(!0):a.values[0]+" "+(e.dataset.suffix||"")),c&&c[0]&&(c[0].dataset.value=l?wteL10n.priceFormat(a.values[0]).format(!0):a.values[0]+" "+(e.dataset.suffix||"")),s&&(s.innerHTML=l?wteL10n.priceFormat(a.values[1]).format(!0):a.values[1]+" "+(e.dataset.suffix||"")),c&&c[1]&&(c[1].dataset.value=l?wteL10n.priceFormat(a.values[1]).format(!0):a.values[1]+" "+(e.dataset.suffix||""))},l=t=>{var a;const n=t.querySelector(t.dataset.rangeSlider);if(!n)return;const i=null===(a=t.dataset.range)||void 0===a?void 0:a.split(",").map((e=>+e)),o="price"===t.dataset.valueFormat;window.noUiSlider?(noUiSlider.create(n,{start:i||[0,50],range:{min:[i&&i[0]||0],max:[i&&i[1]||50]},tooltips:[wNumb({decimals:o?2:0,suffix:t.dataset.suffix?" "+t.dataset.suffix:""}),wNumb({decimals:o?2:0,suffix:t.dataset.suffix?" "+(o?wteL10n.baseCurrencySymbol:t.dataset.suffix||""):""})],format:wNumb({decimals:o?2:0}),step:1,connect:!0}),n.noUiSlider.on("update",(e=>function(t,a){console.debug({values:t});const n=e.querySelector("[data-value]"),i=e.querySelector("[data-value-min]"),o=e.querySelector("[data-value-max]"),r=e.querySelector("[data-value-min-display]"),s=e.querySelector("[data-value-max-display]"),l="price"===e.dataset.valueFormat;n&&(n.value=l?wteL10n.priceFormat(t[0]).format(!0)+" - "+wteL10n.priceFormat(t[1]).format(!0):t[0]+" "+(e.dataset.suffix||"")+" - "+t[1]+" "+(e.dataset.suffix||"")),i&&(i.value=t[0]),o&&(o.value=t[1]);const c=e.querySelectorAll(".ui-slider-handle");r&&(r.innerHTML=l?wteL10n.priceFormat(t[0]).format(!0):t[0]+" "+(e.dataset.suffix||"")),c&&c[0]&&(c[0].dataset.value=l?wteL10n.priceFormat(t[0]).format(!0):t[0]+" "+(e.dataset.suffix||"")),s&&(s.innerHTML=l?wteL10n.priceFormat(t[1]).format(!0):t[1]+" "+(e.dataset.suffix||"")),c&&c[1]&&(c[1].dataset.value=l?wteL10n.priceFormat(t[1]).format(!0):t[1]+" "+(e.dataset.suffix||""))})(t))):e(n).slider({range:!0,min:i&&i[0]||0,max:i&&i[1]||50,values:i||[0,50],slide:s(t)})};window.addEventListener("load",(function(e){const t=document.querySelectorAll("[data-range-slider]");if(t)for(let e=0;e<t.length;e++)t[e]&&l(t[e]);!function(e){var t=document.querySelectorAll(e);if(t)for(var a=t.length,n=0;n<a;n++){const e=t[n];if(!e)continue;const s=e.querySelector(".wpte__input"),l=e.querySelector(".wpte__input-value");s&&(null==s||s.setAttribute("readonly",""),null==s||s.addEventListener("click",(function(n){n.stopPropagation();const i=e.classList.contains("options-open");for(var o=0;o<a;o++)t[o].classList.remove("options-open");e.classList.toggle("options-open",!i)})));var i=e.querySelector(".wpte__select-options");if(!i)continue;var o=i.querySelectorAll("li"),r=o.length;const c=function(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e&&Array.from(e).forEach((e=>{a?e.classList.add(t):e.classList.remove(t)}))},d=t=>{const a=t;a.dataset.label&&(s.value=a.dataset.label,l.setAttribute("value",a.dataset.value),c(e.querySelectorAll("li"),"selected",!1),a.classList.add("selected"),a.closest("li").classList.add("selected"),e.classList.remove("options-open"),e.dispatchEvent(new CustomEvent("change",{detail:{value:a.dataset.value,name:l.name}})))};for(let e=0;e<r;e++)""==o[e].dataset.selected&&d(o[e]),o[e].addEventListener("click",(function(e){e.stopPropagation(),d(this)}))}document.addEventListener("click",(function(t){if("wpte__input"!=t.target.className)for(var a=document.querySelectorAll(e),n=a.length,i=0;i<n;i++)a[i].classList.remove("options-open")}))}(".wpte__select-field");const a=document.querySelector(".wte-ordering"),n=a&&a.querySelector(".wpte__select-field")||null;n&&n.addEventListener("change",(function(e){null==a||a.submit()})),new class{constructor(e){var t,a,n;this.component=document.querySelector(e),this.component&&(this.resetButton=this.component.querySelector("#reset-trip-search-criteria"),this.resetButton&&this.resetButton.addEventListener("click",this.handleResetClick()),this.initFilters(),this.sortItems(),null!==(t=window)&&void 0!==t&&null!==(a=t.wteL10n)&&void 0!==a&&null!==(n=a.util)&&void 0!==n&&n.on&&window.wteL10n.util.on("click",".load-more-search",this.handleLoadMore()))}sortItems(){let e=document.querySelectorAll(".category-trips-single");if(e){var t;e=Array.from(e);const a=e.filter((e=>e.classList.contains("__featured-trip"))),n=e.filter((e=>!e.classList.contains("__featured-trip")));e=[...a,...n];const i=null===(t=e[0])||void 0===t?void 0:t.parentElement;if(i){i.innerHTML="";for(let t of e)i.appendChild(t)}}}handleLoadMore(){return function(e){var t;e.preventDefault();const a=this,n=a.dataset.currentPage,i=a.dataset.maxPage,o=null===(t=document.querySelector(".wte-view-mode-selection.active"))||void 0===t?void 0:t.dataset.mode,r={action:"wte_show_ajax_result_load",query:a.dataset.queryVars,page:a.dataset.currentPage,mode:o,nonce:a.dataset.nonce},s=new FormData;for(let e in r)s.append(e,r[e]);fetch(WTEAjaxData.ajaxurl,{body:s,method:"POST"}).then((e=>e.json())).then((e=>{var t;e.success&&(jQuery(".wte-category-outer-wrap .category-main-wrap").append((null==e||null===(t=e.data)||void 0===t?void 0:t.data)||""),a.dataset.currentPage=+n+1,a.dataset.currentPage+1>=i&&a.parentElement.remove()),jQuery("#loader").fadeOut(500)}))}}fetchfilteredData(){var e;let t={action:"wte_show_ajax_result",nonce:this.component.dataset.filterNonce,mode:jQuery(".wte-view-mode-selection.active").attr("data-mode"),sort:null===(e=document.querySelector("[name=wte_orderby]"))||void 0===e?void 0:e.value};const a=new FormData;let n={};const i=this.component.querySelectorAll("input[type=radio]:checked, input[type=checkbox]:checked, .ui-slider"),o=i&&Array.from(i)||[];for(const e of o)switch(e.type||e.classList.contains("ui-slider")&&"slider"){case"checkbox":n[e.name]||(n[e.name]=[]),a.append(`result[${e.name}][]`,e.value);break;case"radio":const i="trip-chosen-date"==e.name?"date":e.name;a.append(i,e.value);break;case"number":case"text":e.value="";break;case"slider":const o=jQuery(e).slider("option","values");o&&(e.dataset.minKey&&(t[e.dataset.minKey]=o[0]),e.dataset.maxKey&&(t[e.dataset.maxKey]=o[1]))}t.result={...n};for(let e in t)"result"!==e&&a.append(e,t[e]);jQuery("#loader").fadeIn(500),fetch(wte_advanced_search.ajax_url,{method:"POST",body:a}).then((e=>e.json())).then((e=>{var t;e.success&&e.data&&(jQuery(".wte-category-outer-wrap").html((null==e||null===(t=e.data)||void 0===t?void 0:t.data)||""),jQuery(".wte-filter-foundposts").html(`\n                            <h2 class="searchFoundPosts">${e.data.foundposts}</h2>\n                            `),jQuery(".trip-pagination").remove()),jQuery("#loader").fadeOut(500)}))}handleFiltersChange(e){const t=this;return function(a){t.resetButton.style.removeProperty("display"),"slide"!=e&&t.fetchfilteredData()}}initFilters(){let e=this.component.querySelectorAll(".advanced-search-field");e=e&&Array.from(e);let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(const a of e){const e=a.querySelector(".filter-section-title"),n=a.querySelector(".filter-section-content");t?(a.classList.toggle("wte-list-opn",!1),jQuery(n).slideUp(350)):(a.classList.toggle("wte-list-opn",!0),jQuery(n).slideDown(350)),e&&e.addEventListener("click",(function(){a.classList.toggle("wte-list-opn"),n&&jQuery(n).stop().slideToggle()}))}["change","slide","slidestop"].forEach((e=>{jQuery(this.component).on(e,this.handleFiltersChange(e))}))}handleResetClick(){const e=this;return function(t){const a=e.component.querySelectorAll("input[type=radio], input[type=checkbox], .ui-slider"),n=Array.from(a);for(const e of n)switch(e.type||e.classList.contains("ui-slider")&&"slider"){case"checkbox":case"radio":e.checked&&(e.checked=!1);break;case"number":case"text":e.value="";break;case"slider":const t=jQuery(e).slider("option");null!=t&&t.max&&(jQuery(e).slider("option","values",[t.min,t.max]),s(e)(null,{values:[t.min,t.max]}))}this.style.display="none",e.fetchfilteredData()}}}("#wte__trip-search-filters")}))}(window.jQuery),jQuery((function(e){const t=document.getElementById("wte-advanced-search-form-shortcode");if(t){const e=t.querySelectorAll('select[name="destination"], .advanced-search-field select[name="cat"], select[name="activities"], .advanced-search-field .trip-date-select');if(e)for(let t=0;t<e.length;t++)jQuery(e[t]).niceSelect()}jQuery.fn.stick_in_parent&&e(".trip-price").stick_in_parent()})),jQuery((function(e){var t=!1;"1"==rtl.enable&&(t=!0),jQuery.fn.owlCarousel&&e(".wpte-trip-feat-img-gallery").owlCarousel({nav:!0,navigationText:["&lsaquo;","&rsaquo;"],items:1,autoplay:!0,slideSpeed:300,paginationSpeed:400,center:!0,loop:!0,rtl:t,dots:!1})})),function(){if(document.getElementById("wte__booking")){const{default:e}=r(6137);window.bookingProcess=e,e.createStore(),e.fetchAndDispatchData()}}(),window.addEventListener("load",(async()=>{let e=document.getElementById("wte__booking");if(e){let t=new(0,window.bookingProcess)(e);window.WTEBooking=t,jQuery.fn.fancybox&&jQuery("#open-booking-modal").fancybox({type:"inline",src:"#wte__booking",baseClass:"wte-fb-popup"})}const{flatpickr:t,wteL10n:{locale:a}}=window;if(t&&null!=t&&t.l10ns&&a){const e=a.split("_");try{await r(9623)(`./${e[0]}.js`)}catch(e){console.warn("language file not found.")}null==t||t.localize(t.l10ns[e[0]]||t.l10ns.en)}})),jQuery((function(e){e(".wp-travel-engine-datetime").length>0&&e(".wp-travel-engine-datetime").datepicker({maxDate:0,changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",yearRange:"-100:+0"}),e(document).on("click",".btn-loadmore, .load-destination",(function(t){t.preventDefault();var a=e(this),n=a.attr("data-current-page"),i=a.attr("data-max-page"),o={action:this.classList.contains("load-destination")?"wpte_ajax_load_more_destination":"wpte_ajax_load_more",query:a.attr("data-query-vars"),page:n,nonce:beloadmore.nonce};e.ajax({url:beloadmore.url,data:o,type:"POST",beforeSend:function(t){e("#loader").fadeIn(500)},success:function(e){a.before(e),n++,a.attr("data-current-page",n),n==i&&a.remove()},complete:function(){e("#loader").fadeOut(500),e(document).find(".trip-review-stars").length&&e(document).find(".trip-review-stars").each((function(){var t=e(this).data("rating-value"),a=""!==(a=e(this).data("icon-type"))?a:"";e(this).rateYo({rating:t,starSvg:a})}))}})}))}))}();